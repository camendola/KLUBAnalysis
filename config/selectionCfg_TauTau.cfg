# the definition of composed selections. Can contain as well TCut style selections, e.g.:
# resolved = baseline, btagMM, massCut
# resolvedHighPt = baseline, btagMM, massCut, dau1_pt > 150
# use comma separated lists
[selections]

### some selections with tes up/down
### note: jets are selected at skim level to have pt > 20
### so I am raising the pt value to 25 just to test the change in the acceptance

baseline_nominal     = pairType == 2 && dau1_pt > 45 && abs (dau1_eta) < 2.1 && dau2_pt > 45 && abs (dau2_eta) < 2.1 && nleps == 0       && bjet1_pt_raw > 25         && bjet2_pt_raw > 25
baseline_tesUp       = pairType == 2 && dau1_pt_tauup > 45   && abs (dau1_eta) < 2.1 && dau2_pt_tauup > 45   && abs (dau2_eta) < 2.1 && nleps == 0       && bjet1_pt_raw > 25         && bjet2_pt_raw > 25
baseline_tesDown     = pairType == 2 && dau1_pt_taudown > 45 && abs (dau1_eta) < 2.1 && dau2_pt_taudown > 45 && abs (dau2_eta) < 2.1 && nleps == 0       && bjet1_pt_raw > 25         && bjet2_pt_raw > 25
baseline_jesUp       = pairType == 2 && dau1_pt > 45         && abs (dau1_eta) < 2.1 && dau2_pt > 45         && abs (dau2_eta) < 2.1 && nleps == 0       && bjet1_pt_raw_jetup > 25   && bjet2_pt_raw_jetup > 25
baseline_jesDown     = pairType == 2 && dau1_pt > 45         && abs (dau1_eta) < 2.1 && dau2_pt > 45         && abs (dau2_eta) < 2.1 && nleps == 0       && bjet1_pt_raw_jetdown > 25 && bjet2_pt_raw_jetdown > 25
ellypsMassCut_tesUp    = ((tauH_SVFIT_mass_up-116.)*(tauH_SVFIT_mass_up-116.))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_tesDown  = ((tauH_SVFIT_mass_down-116.)*(tauH_SVFIT_mass_down-116.))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0
ellypsMassCut_jesUp    = ((tauH_SVFIT_mass-116.)*(tauH_SVFIT_mass-116.))/(35.*35.) + ((bH_mass_raw_jetup-111.)*(bH_mass_raw_jetup-111.))/(45.*45.) <  1.0
ellypsMassCut_jesDown  = ((tauH_SVFIT_mass-116.)*(tauH_SVFIT_mass-116.))/(35.*35.) + ((bH_mass_raw_jetdown-111.)*(bH_mass_raw_jetdown-111.))/(45.*45.) <  1.0

s1b1jresolvedMcut_nominal = baseline_nominal , btagM, isBoosted != 1 , ellypsMassCut
s2b0jresolvedMcut_nominal = baseline_nominal , btagMM, isBoosted != 1 , ellypsMassCut
sboostedLLMcut_nominal    = baseline_nominal , btagLL, isBoosted == 1 , boostMassCut

s1b1jresolvedMcut_tesUp   = baseline_tesUp , btagM, isBoosted != 1 , ellypsMassCut_tesUp
s2b0jresolvedMcut_tesUp   = baseline_tesUp , btagMM, isBoosted != 1 , ellypsMassCut_tesUp
sboostedLLMcut_tesUp      = baseline_tesUp , btagLL, isBoosted == 1 , boostMassCut

s1b1jresolvedMcut_tesDown = baseline_tesDown , btagM, isBoosted != 1 , ellypsMassCut_tesDown
s2b0jresolvedMcut_tesDown = baseline_tesDown , btagMM, isBoosted != 1 , ellypsMassCut_tesDown
sboostedLLMcut_tesDown    = baseline_tesDown , btagLL, isBoosted == 1 , boostMassCut

s1b1jresolvedMcut_jesUp   = baseline_jesUp , btagM, isBoosted != 1 , ellypsMassCut_jesUp 
s2b0jresolvedMcut_jesUp   = baseline_jesUp , btagMM, isBoosted != 1 , ellypsMassCut_jesUp 
sboostedLLMcut_jesUp      = baseline_jesUp , btagLL, isBoosted == 1 , boostMassCut

s1b1jresolvedMcut_jesDown = baseline_jesDown , btagM, isBoosted != 1 , ellypsMassCut_jesDown 
s2b0jresolvedMcut_jesDown = baseline_jesDown , btagMM, isBoosted != 1 , ellypsMassCut_jesDown 
sboostedLLMcut_jesDown    = baseline_jesDown , btagLL, isBoosted == 1 , boostMassCut

###########################################################################################

#baseline
baseline     = pairType == 2 && dau1_pt > 40 && abs (dau1_eta) < 2.1 && dau2_pt > 40 && abs (dau2_eta) < 2.1 && nleps == 0 && nbjetscand > 1
#DY sample has Mll > 50 GeV -> look at selection with tauH_mass > 55 GeV
baseline55     = baseline, tauH_mass > 55

#baseline inclusive HTT (no additional jets requirement, only tautau pair)
baselineHTauTau     = pairType == 2 && dau1_pt > 40 && abs (dau1_eta) < 2.1 && dau2_pt > 40 && abs (dau2_eta) < 2.1 && nleps == 0
baselineHTauTau55     = baselineHTauTau, tauH_mass > 55

#splitting for different decay modes
baselineHTauTau_tau1_1Pr_tau2_1Pr    = baselineHTauTau, dau1_decayMode == 0 && dau2_decayMode == 0
baselineHTauTau_tau1_1Pr_tau2_1PrPi0 = baselineHTauTau, dau1_decayMode == 0 && dau2_decayMode == 1
baselineHTauTau_tau1_1Pr_tau2_3Pr    = baselineHTauTau, dau1_decayMode == 0 && dau2_decayMode == 10

baselineHTauTau_tau1_1PrPi0_tau2_1Pr    = baselineHTauTau, dau1_decayMode == 1 && dau2_decayMode == 0
baselineHTauTau_tau1_1PrPi0_tau2_1PrPi0 = baselineHTauTau, dau1_decayMode == 1 && dau2_decayMode == 1
baselineHTauTau_tau1_1PrPi0_tau2_3Pr    = baselineHTauTau, dau1_decayMode == 1 && dau2_decayMode == 10

baselineHTauTau_tau1_3Pr_tau2_1Pr    = baselineHTauTau, dau1_decayMode == 10 && dau2_decayMode == 0
baselineHTauTau_tau1_3Pr_tau2_1PrPi0 = baselineHTauTau, dau1_decayMode == 10 && dau2_decayMode == 1
baselineHTauTau_tau1_3Pr_tau2_3Pr    = baselineHTauTau, dau1_decayMode == 10 && dau2_decayMode == 10

baselineHTauTau_both1Pr    = baselineHTauTau, dau1_decayMode == 0  && dau2_decayMode == 0
baselineHTauTau_both1PrPi0 = baselineHTauTau, dau1_decayMode == 1  && dau2_decayMode == 1
baselineHTauTau_both3Pr    = baselineHTauTau, dau1_decayMode == 10 && dau2_decayMode == 10

baselineHTauTau_1Pr    = baselineHTauTau,  dau2_decayMode == 0
baselineHTauTau_1PrPi0 = baselineHTauTau,  dau2_decayMode == 1
baselineHTauTau_3Pr    = baselineHTauTau,  dau2_decayMode == 10


# region DY enriched, splitted in different decay modes

DYenriched = ditau_deltaR < 2
 
baselineHTauTau_DY        = baselineHTauTau,  DYenriched
baselineHTauTau_1Pr_DY    = baselineHTauTau,  dau2_decayMode == 0 , DYenriched
baselineHTauTau_1PrPi0_DY = baselineHTauTau,  dau2_decayMode == 1 , DYenriched
baselineHTauTau_3Pr_DY    = baselineHTauTau,  dau2_decayMode == 10, DYenriched

baselineHTauTau_both1Pr_DY    = baselineHTauTau, DYenriched,dau1_decayMode == 0  && dau2_decayMode == 0
baselineHTauTau_both1PrPi0_DY = baselineHTauTau, DYenriched,dau1_decayMode == 1  && dau2_decayMode == 1
baselineHTauTau_both3Pr_DY    = baselineHTauTau, DYenriched,dau1_decayMode == 10 && dau2_decayMode == 10

# btag requirements
btagL        = bjet1_bID_deepCSV > 0.1522 && bjet2_bID_deepCSV < 0.1522 #only 1 jet with loose btag working point
btagM        = bjet1_bID_deepCSV > 0.4941 && bjet2_bID_deepCSV < 0.4941 #only 1 jet with medium btag working point
btagLL       = bjet1_bID_deepCSV > 0.1522 && bjet2_bID_deepCSV > 0.1522 #both jets with loose btag working point
btagMM       = bjet1_bID_deepCSV > 0.4941 && bjet2_bID_deepCSV > 0.4941 #both jets with medium btag working point
nobtagMM     = bjet1_bID_deepCSV < 0.4941 && bjet2_bID_deepCSV < 0.4941 #both jets NOT btagged (medium working point)

massCut      = bH_mass_raw > 80 && bH_mass_raw < 160 && tauH_SVFIT_mass > 80 && tauH_SVFIT_mass < 160
massCutCent  = tauH_SVFIT_mass > 79.5 && tauH_SVFIT_mass < 152.5 && bH_mass_raw > 74.5 && bH_mass_raw < 147.5
boostMassCut = tauH_SVFIT_mass > 79.5 && tauH_SVFIT_mass < 152.5 && fatjet_softdropMass > 90 && fatjet_softdropMass < 160
ellypsMassCut  = ((tauH_SVFIT_mass-116.)*(tauH_SVFIT_mass-116.))/(35.*35.) + ((bH_mass_raw-111.)*(bH_mass_raw-111.))/(45.*45.) <  1.0 # mass cut centered on the Hbb Htt masses, applied in the final selections
circMassCut  = TMath::Sqrt((tauH_SVFIT_mass-116.)*(tauH_SVFIT_mass-116.) + (bH_mass_raw-111.)*(bH_mass_raw-111.)) <  40.0


# ABCD regions used in the analysis
SR           = isOS != 0 && dau1_MVAisoNew >= 3 && dau2_MVAisoNew >= 3                         # signal region: opposite sign, isolated taus
SStight      = isOS == 0 && dau1_MVAisoNew >= 3 && dau2_MVAisoNew >= 3			       # B region
OSrlx        = isOS != 0 && dau1_MVAisoNew >= 3 && dau2_MVAisoNew >= 1			       
SSrlx        = isOS == 0 && dau1_MVAisoNew >= 3 && dau2_MVAisoNew >= 1			       # B' region
OSinviso     = isOS != 0 && dau1_MVAisoNew >= 3 && dau2_MVAisoNew >= 1 && dau2_MVAisoNew < 3   # C region
SSinviso     = isOS == 0 && dau1_MVAisoNew >= 3 && dau2_MVAisoNew >= 1 && dau2_MVAisoNew < 3   # D region


# for ABCD with vtight isolation requirement instead of medium
SRVTight =isOS != 0 && dau1_MVAisoNew >= 5 && dau2_MVAisoNew >= 5
SSrlxVTight = isOS == 0 && dau1_MVAisoNew >= 5 && dau2_MVAisoNew >= 3
SStightVTight      = isOS == 0 && dau1_MVAisoNew >= 5 && dau2_MVAisoNew >= 5
OSinvisoVTight     = isOS != 0 && dau1_MVAisoNew >= 5 && dau2_MVAisoNew >= 1 && dau2_MVAisoNew < 5
SSinvisoVTight     = isOS == 0 && dau1_MVAisoNew >= 5 && dau2_MVAisoNew >= 1 && dau2_MVAisoNew < 5

# for ABCD with tight isolation requirement instead of medium
SRTight           =isOS != 0 && dau1_MVAisoNew >= 4 && dau2_MVAisoNew >= 4
SSrlxTight        = isOS == 0 && dau1_MVAisoNew >= 4 && dau2_MVAisoNew >= 2
SStightTight      = isOS == 0 && dau1_MVAisoNew >= 4 && dau2_MVAisoNew >= 4
OSinvisoTight     = isOS != 0 && dau1_MVAisoNew >= 4 && dau2_MVAisoNew >= 1 && dau2_MVAisoNew < 4
SSinvisoTight     = isOS == 0 && dau1_MVAisoNew >= 4 && dau2_MVAisoNew >= 1 && dau2_MVAisoNew < 4


# baseline + Mass cut
baselineMcut = baseline, ellypsMassCut

# baseline by number of btagged jets
s1b1j        = baseline , btagM
s2b0j        = baseline , btagMM
s0b2j        = baseline , nobtagMM   

# split resolved and boosted categories
s1b1jresolved = baseline , btagM, isBoosted != 1
s2b0jresolved = baseline , btagMM, isBoosted != 1
sboostedLL    = baseline , btagLL, isBoosted == 1

# final categories
s1b1jresolvedMcut = baseline , btagM, isBoosted != 1 , ellypsMassCut
s2b0jresolvedMcut = baseline , btagMM, isBoosted != 1 , ellypsMassCut
sboostedLLMcut       = baseline , btagLL, isBoosted == 1 , boostMassCut


# some tests for VBF cateogory

baselineVBFMcut = baselineVBF, ellypsMassCut

VBF_0_0   = baseline, isVBF == 1, VBFjj_mass > 0 , VBFjj_deltaEta > 0
VBF_0_1   = baseline, isVBF == 1, VBFjj_mass > 0 , VBFjj_deltaEta > 1.
VBF_0_2   = baseline, isVBF == 1, VBFjj_mass > 0 , VBFjj_deltaEta > 2.
VBF_0_3   = baseline, isVBF == 1, VBFjj_mass > 0 , VBFjj_deltaEta > 3.
VBF_0_4   = baseline, isVBF == 1, VBFjj_mass > 0 , VBFjj_deltaEta > 4.
VBF_0_5   = baseline, isVBF == 1, VBFjj_mass > 0 , VBFjj_deltaEta > 5.
VBF_0_6   = baseline, isVBF == 1, VBFjj_mass > 0 , VBFjj_deltaEta > 6.
VBF_0_7   = baseline, isVBF == 1, VBFjj_mass > 0 , VBFjj_deltaEta > 7.

VBF_100_0 = baseline, isVBF == 1, VBFjj_mass > 100 , VBFjj_deltaEta > 0
VBF_100_1 = baseline, isVBF == 1, VBFjj_mass > 100 , VBFjj_deltaEta > 1.
VBF_100_2 = baseline, isVBF == 1, VBFjj_mass > 100 , VBFjj_deltaEta > 2.
VBF_100_3 = baseline, isVBF == 1, VBFjj_mass > 100 , VBFjj_deltaEta > 3.
VBF_100_4 = baseline, isVBF == 1, VBFjj_mass > 100 , VBFjj_deltaEta > 4.
VBF_100_5 = baseline, isVBF == 1, VBFjj_mass > 100 , VBFjj_deltaEta > 5.
VBF_100_6 = baseline, isVBF == 1, VBFjj_mass > 100 , VBFjj_deltaEta > 6.
VBF_100_7 = baseline, isVBF == 1, VBFjj_mass > 100 , VBFjj_deltaEta > 7.

VBF_200_0 = baseline, isVBF == 1, VBFjj_mass > 200 , VBFjj_deltaEta > 0
VBF_200_1 = baseline, isVBF == 1, VBFjj_mass > 200 , VBFjj_deltaEta > 1.
VBF_200_2 = baseline, isVBF == 1, VBFjj_mass > 200 , VBFjj_deltaEta > 2.
VBF_200_3 = baseline, isVBF == 1, VBFjj_mass > 200 , VBFjj_deltaEta > 3.
VBF_200_4 = baseline, isVBF == 1, VBFjj_mass > 200 , VBFjj_deltaEta > 4.
VBF_200_5 = baseline, isVBF == 1, VBFjj_mass > 200 , VBFjj_deltaEta > 5.
VBF_200_6 = baseline, isVBF == 1, VBFjj_mass > 200 , VBFjj_deltaEta > 6.
VBF_200_7 = baseline, isVBF == 1, VBFjj_mass > 200 , VBFjj_deltaEta > 7.

VBF_300_0 = baseline, isVBF == 1, VBFjj_mass > 300 , VBFjj_deltaEta > 0
VBF_300_1 = baseline, isVBF == 1, VBFjj_mass > 300 , VBFjj_deltaEta > 1.
VBF_300_2 = baseline, isVBF == 1, VBFjj_mass > 300 , VBFjj_deltaEta > 2.
VBF_300_3 = baseline, isVBF == 1, VBFjj_mass > 300 , VBFjj_deltaEta > 3.
VBF_300_4 = baseline, isVBF == 1, VBFjj_mass > 300 , VBFjj_deltaEta > 4.
VBF_300_5 = baseline, isVBF == 1, VBFjj_mass > 300 , VBFjj_deltaEta > 5.
VBF_300_6 = baseline, isVBF == 1, VBFjj_mass > 300 , VBFjj_deltaEta > 6.
VBF_300_7 = baseline, isVBF == 1, VBFjj_mass > 300 , VBFjj_deltaEta > 7.

VBF_400_0 = baseline, isVBF == 1, VBFjj_mass > 400 , VBFjj_deltaEta > 0
VBF_400_1 = baseline, isVBF == 1, VBFjj_mass > 400 , VBFjj_deltaEta > 1.
VBF_400_2 = baseline, isVBF == 1, VBFjj_mass > 400 , VBFjj_deltaEta > 2.
VBF_400_3 = baseline, isVBF == 1, VBFjj_mass > 400 , VBFjj_deltaEta > 3.
VBF_400_4 = baseline, isVBF == 1, VBFjj_mass > 400 , VBFjj_deltaEta > 4.
VBF_400_5 = baseline, isVBF == 1, VBFjj_mass > 400 , VBFjj_deltaEta > 5.
VBF_400_6 = baseline, isVBF == 1, VBFjj_mass > 400 , VBFjj_deltaEta > 6.
VBF_400_7 = baseline, isVBF == 1, VBFjj_mass > 400 , VBFjj_deltaEta > 7.

VBF_500_0 = baseline, isVBF == 1, VBFjj_mass > 500 , VBFjj_deltaEta > 0
VBF_500_1 = baseline, isVBF == 1, VBFjj_mass > 500 , VBFjj_deltaEta > 1.
VBF_500_2 = baseline, isVBF == 1, VBFjj_mass > 500 , VBFjj_deltaEta > 2.
VBF_500_3 = baseline, isVBF == 1, VBFjj_mass > 500 , VBFjj_deltaEta > 3.
VBF_500_4 = baseline, isVBF == 1, VBFjj_mass > 500 , VBFjj_deltaEta > 4.
VBF_500_5 = baseline, isVBF == 1, VBFjj_mass > 500 , VBFjj_deltaEta > 5.
VBF_500_6 = baseline, isVBF == 1, VBFjj_mass > 500 , VBFjj_deltaEta > 6.
VBF_500_7 = baseline, isVBF == 1, VBFjj_mass > 500 , VBFjj_deltaEta > 7.

VBF_600_0 = baseline, isVBF == 1, VBFjj_mass > 600 , VBFjj_deltaEta > 0
VBF_600_1 = baseline, isVBF == 1, VBFjj_mass > 600 , VBFjj_deltaEta > 1.
VBF_600_2 = baseline, isVBF == 1, VBFjj_mass > 600 , VBFjj_deltaEta > 2.
VBF_600_3 = baseline, isVBF == 1, VBFjj_mass > 600 , VBFjj_deltaEta > 3.
VBF_600_4 = baseline, isVBF == 1, VBFjj_mass > 600 , VBFjj_deltaEta > 4.
VBF_600_5 = baseline, isVBF == 1, VBFjj_mass > 600 , VBFjj_deltaEta > 5.
VBF_600_6 = baseline, isVBF == 1, VBFjj_mass > 600 , VBFjj_deltaEta > 6.
VBF_600_7 = baseline, isVBF == 1, VBFjj_mass > 600 , VBFjj_deltaEta > 7.

VBF_700_0 = baseline, isVBF == 1, VBFjj_mass > 700 , VBFjj_deltaEta > 0
VBF_700_1 = baseline, isVBF == 1, VBFjj_mass > 700 , VBFjj_deltaEta > 1.
VBF_700_2 = baseline, isVBF == 1, VBFjj_mass > 700 , VBFjj_deltaEta > 2.
VBF_700_3 = baseline, isVBF == 1, VBFjj_mass > 700 , VBFjj_deltaEta > 3.
VBF_700_4 = baseline, isVBF == 1, VBFjj_mass > 700 , VBFjj_deltaEta > 4.
VBF_700_5 = baseline, isVBF == 1, VBFjj_mass > 700 , VBFjj_deltaEta > 5.
VBF_700_6 = baseline, isVBF == 1, VBFjj_mass > 700 , VBFjj_deltaEta > 6.
VBF_700_7 = baseline, isVBF == 1, VBFjj_mass > 700 , VBFjj_deltaEta > 7.

VBF_800_0 = baseline, isVBF == 1, VBFjj_mass > 800 , VBFjj_deltaEta > 0
VBF_800_1 = baseline, isVBF == 1, VBFjj_mass > 800 , VBFjj_deltaEta > 1.
VBF_800_2 = baseline, isVBF == 1, VBFjj_mass > 800 , VBFjj_deltaEta > 2.
VBF_800_3 = baseline, isVBF == 1, VBFjj_mass > 800 , VBFjj_deltaEta > 3.
VBF_800_4 = baseline, isVBF == 1, VBFjj_mass > 800 , VBFjj_deltaEta > 4.
VBF_800_5 = baseline, isVBF == 1, VBFjj_mass > 800 , VBFjj_deltaEta > 5.
VBF_800_6 = baseline, isVBF == 1, VBFjj_mass > 800 , VBFjj_deltaEta > 6.
VBF_800_7 = baseline, isVBF == 1, VBFjj_mass > 800 , VBFjj_deltaEta > 7.

VBF_900_0 = baseline, isVBF == 1, VBFjj_mass > 900 , VBFjj_deltaEta > 0
VBF_900_1 = baseline, isVBF == 1, VBFjj_mass > 900 , VBFjj_deltaEta > 1.
VBF_900_2 = baseline, isVBF == 1, VBFjj_mass > 900 , VBFjj_deltaEta > 2.
VBF_900_3 = baseline, isVBF == 1, VBFjj_mass > 900 , VBFjj_deltaEta > 3.
VBF_900_4 = baseline, isVBF == 1, VBFjj_mass > 900 , VBFjj_deltaEta > 4.
VBF_900_5 = baseline, isVBF == 1, VBFjj_mass > 900 , VBFjj_deltaEta > 5.
VBF_900_6 = baseline, isVBF == 1, VBFjj_mass > 900 , VBFjj_deltaEta > 6.
VBF_900_7 = baseline, isVBF == 1, VBFjj_mass > 900 , VBFjj_deltaEta > 7.

VBF_1000_0 = baseline, isVBF == 1, VBFjj_mass > 1000 , VBFjj_deltaEta > 0
VBF_1000_1 = baseline, isVBF == 1, VBFjj_mass > 1000 , VBFjj_deltaEta > 1.
VBF_1000_2 = baseline, isVBF == 1, VBFjj_mass > 1000 , VBFjj_deltaEta > 2.
VBF_1000_3 = baseline, isVBF == 1, VBFjj_mass > 1000 , VBFjj_deltaEta > 3.
VBF_1000_4 = baseline, isVBF == 1, VBFjj_mass > 1000 , VBFjj_deltaEta > 4.
VBF_1000_5 = baseline, isVBF == 1, VBFjj_mass > 1000 , VBFjj_deltaEta > 5.
VBF_1000_6 = baseline, isVBF == 1, VBFjj_mass > 1000 , VBFjj_deltaEta > 6.
VBF_1000_7 = baseline, isVBF == 1, VBFjj_mass > 1000 , VBFjj_deltaEta > 7.

VBF_1100_0 = baseline, isVBF == 1, VBFjj_mass > 1100 , VBFjj_deltaEta > 0
VBF_1100_1 = baseline, isVBF == 1, VBFjj_mass > 1100 , VBFjj_deltaEta > 1.
VBF_1100_2 = baseline, isVBF == 1, VBFjj_mass > 1100 , VBFjj_deltaEta > 2.
VBF_1100_3 = baseline, isVBF == 1, VBFjj_mass > 1100 , VBFjj_deltaEta > 3.
VBF_1100_4 = baseline, isVBF == 1, VBFjj_mass > 1100 , VBFjj_deltaEta > 4.
VBF_1100_5 = baseline, isVBF == 1, VBFjj_mass > 1100 , VBFjj_deltaEta > 5.
VBF_1100_6 = baseline, isVBF == 1, VBFjj_mass > 1100 , VBFjj_deltaEta > 6.
VBF_1100_7 = baseline, isVBF == 1, VBFjj_mass > 1100 , VBFjj_deltaEta > 7.

VBF_1200_0 = baseline, isVBF == 1, VBFjj_mass > 1200 , VBFjj_deltaEta > 0
VBF_1200_1 = baseline, isVBF == 1, VBFjj_mass > 1200 , VBFjj_deltaEta > 1.
VBF_1200_2 = baseline, isVBF == 1, VBFjj_mass > 1200 , VBFjj_deltaEta > 2.
VBF_1200_3 = baseline, isVBF == 1, VBFjj_mass > 1200 , VBFjj_deltaEta > 3.
VBF_1200_4 = baseline, isVBF == 1, VBFjj_mass > 1200 , VBFjj_deltaEta > 4.
VBF_1200_5 = baseline, isVBF == 1, VBFjj_mass > 1200 , VBFjj_deltaEta > 5.
VBF_1200_6 = baseline, isVBF == 1, VBFjj_mass > 1200 , VBFjj_deltaEta > 6.
VBF_1200_7 = baseline, isVBF == 1, VBFjj_mass > 1200 , VBFjj_deltaEta > 7.


VBF_BDT_m1  = baseline, BDToutVBF > -1
VBF_BDT_m09 = baseline, BDToutVBF > -0.9
VBF_BDT_m08 = baseline, BDToutVBF > -0.8
VBF_BDT_m07 = baseline, BDToutVBF > -0.7
VBF_BDT_m06 = baseline, BDToutVBF > -0.6
VBF_BDT_m05 = baseline, BDToutVBF > -0.5
VBF_BDT_m04 = baseline, BDToutVBF > -0.4
VBF_BDT_m03 = baseline, BDToutVBF > -0.3
VBF_BDT_m02 = baseline, BDToutVBF > -0.2
VBF_BDT_m01 = baseline, BDToutVBF > -0.1
VBF_BDT_00  = baseline, BDToutVBF > 0.0
VBF_BDT_p01 = baseline, BDToutVBF > 0.1
VBF_BDT_p02 = baseline, BDToutVBF > 0.2
VBF_BDT_p03 = baseline, BDToutVBF > 0.3
VBF_BDT_p04 = baseline, BDToutVBF > 0.4
VBF_BDT_p05 = baseline, BDToutVBF > 0.5
VBF_BDT_p06 = baseline, BDToutVBF > 0.6
VBF_BDT_p07 = baseline, BDToutVBF > 0.7
VBF_BDT_p08 = baseline, BDToutVBF > 0.8
VBF_BDT_p09 = baseline, BDToutVBF > 0.9


#########################################################################
#########################################################################

## weights to be applied for a certain selections when calling Fill()
## multiple weights are passed as list and are multiplied together
## NOTE: no weight is applied for data (the simple Fill() is used)
[selectionWeights]
baseline         = MC_weight, PUReweight, trigSF,DYscale_MM_NLO, FakeRateSF, IdAndIsoSF_decayMode
baselineHTauTau  = MC_weight, PUReweight, trigSF,DYscale_MM_NLO, FakeRateSF, IdAndIsoSF_decayMode

#btagLL   = bTagweightL, DYscale_LL
#btagMM   = bTagweightM, DYscale_MM
#nobtagMM = bTagweightM, DYscale_MM
#btagL    = bTagweightL, DYscale_LL ## fixme: should DY scale be rederived for single tag?
#btagM    = bTagweightM, DYscale_MM ## fixme: should DY scale be rederived for single tag?

# remove DY weights, they are already taken into account in baseline weights
btagLL   = bTagweightL
btagMM   = bTagweightM
nobtagMM = bTagweightM
btagL    = bTagweightL
btagM    = bTagweightM

[selectionWeights_ext] # beta feature! use with care!
#weights decay mode dependent computed with QCD backgrond estimation, DY LO weights, old DY weights, on top of decay mode dependend trigger weights, m_vis > 55 #11 Mar 2019 #used for testing, already saved in the skims
#baseline = (dau1_decayMode == 0 && isTau1real): 0.97, (dau2_decayMode == 0 && isTau2real): 0.97, (dau1_decayMode == 1 && isTau1real): 1.04, (dau2_decayMode == 1 && isTau2real): 1.04, (dau1_decayMode == 10 && isTau1real): 0.90, (dau2_decayMode == 10 && isTau2real): 0.90
#baselineHTauTau = (dau1_decayMode == 0 && isTau1real): 0.97, (dau2_decayMode == 0 && isTau2real): 0.97, (dau1_decayMode == 1 && isTau1real): 1.04, (dau2_decayMode == 1 && isTau2real): 1.04, (dau1_decayMode == 10 && isTau1real): 0.90, (dau2_decayMode == 10 && isTau2real): 0.90

#weights decay mode dependent computed with QCD backgrond + fakeTaus estimation, DY LO weights, old DY weights, on top of decay mode dependend trigger weights, m_vis > 55 #11 Mar 2019 #used for testing, already saved in the skims
#baseline = (dau1_decayMode == 0 && isTau1real): 1.05, (dau2_decayMode == 0 && isTau2real): 1.05, (dau1_decayMode == 1 && isTau1real): 1.04, (dau2_decayMode == 1 && isTau2real): 1.04, (dau1_decayMode == 10 && isTau1real): 0.88, (dau2_decayMode == 10 && isTau2real): 0.88
#baselineHTauTau = (dau1_decayMode == 0 && isTau1real): 1.05, (dau2_decayMode == 0 && isTau2real): 1.05, (dau1_decayMode == 1 && isTau1real): 1.04, (dau2_decayMode == 1 && isTau2real): 1.04, (dau1_decayMode == 10 && isTau1real): 0.88, (dau2_decayMode == 10 && isTau2real): 0.88 

#########################################################################
#########################################################################

[sampleWeights]
TTfullyHad = TTtopPtreweight
TTfullyLep = TTtopPtreweight
TTsemiLep  = TTtopPtreweight
#DY = DYLOtoNLOreweight
#DYJetsToLL = DYLOtoNLOreweight
#DY1JetsToLL = DYLOtoNLOreweight
#DY2JetsToLL = DYLOtoNLOreweight
#DY3JetsToLL = DYLOtoNLOreweight
#DY4JetsToLL = DYLOtoNLOreweight
#DYBBJetsToLL = DYLOtoNLOreweight

#DYJets_0j0b = DYLOtoNLOreweight
#DYJets_1j0b = DYLOtoNLOreweight
#DYJets_1j1b = DYLOtoNLOreweight
#DYJets_2j0b = DYLOtoNLOreweight
#DYJets_2j1b = DYLOtoNLOreweight
#DYJets_2j2b = DYLOtoNLOreweight
#DYJets_3j0b = DYLOtoNLOreweight
#DYJets_3j1b = DYLOtoNLOreweight
#DYJets_3j2b = DYLOtoNLOreweight
#DYJets_3j3b = DYLOtoNLOreweight
#DYJets_4j0b = DYLOtoNLOreweight
#DYJets_4j1b = DYLOtoNLOreweight
#DYJets_4j2b = DYLOtoNLOreweight
#DYJets_4j3b = DYLOtoNLOreweight
#DYJets_4j4b = DYLOtoNLOreweight
#


# HH reweight is already included in MC_weight
# lambdarew0 = HH
# lambdarew1 = HH
# lambdarew10 = HH
# lambdarew11 = HH
# lambdarew12 = HH
# lambdarew13 = HH
# lambdarew14 = HH
# lambdarew15 = HH
# lambdarew16 = HH
# lambdarew17 = HH
# lambdarew18 = HH
# lambdarew19 = HH
# lambdarew20 = HH
# lambdarew21 = HH
# lambdarew22 = HH
# lambdarew23 = HH
# lambdarew24 = HH
# lambdarew25 = HH
# lambdarew26 = HH
# lambdarew27 = HH
# lambdarew28 = HH
# lambdarew29 = HH
# lambdarew3 = HH
# lambdarew30 = HH
# lambdarew31 = HH
# lambdarew32 = HH
# lambdarew33 = HH
# lambdarew34 = HH
# lambdarew35 = HH
# lambdarew36 = HH
# lambdarew37 = HH
# lambdarew38 = HH
# lambdarew39 = HH
# lambdarew4 = HH
# lambdarew40 = HH
# lambdarew41 = HH
# lambdarew42 = HH
# lambdarew43 = HH
# lambdarew44 = HH
# lambdarew45 = HH
# lambdarew46 = HH
# lambdarew47 = HH
# lambdarew48 = HH
# lambdarew49 = HH
# lambdarew5 = HH
# lambdarew50 = HH
# lambdarew51 = HH
# lambdarew6 = HH
# lambdarew7 = HH
# lambdarew8 = HH
# lambdarew9 = HH

#########################################################################
#########################################################################


# define alternative weights to be tested instead of the nominal one
[systematics]
TTtopPtreweight  = topUp:TTtopPtreweight_up , topDown:TTtopPtreweight_down
# trigSF         = trigUP:trigSF_up , trigDOWN:trigSF_down
# turnOnreweight = rewUP:turnOnreweight_tauup, rewDO:turnOnreweight_taudown

#########################################################################
#########################################################################

# ROOT-like definition of the binning
[histos]
mT                = 20, 0, 200
HH_pt             = 50, 0, 500
HHKin_mass        = 50, 250, 1000
bjet1_bID         = 50, 0., 1.
bjet2_bID         = 50, 0., 1.
bjet1_bID_deepCSV = 20, 0., 1.
bjet2_bID_deepCSV = 20, 0., 1.
HH_deltaPhi       = 15, 0., 3.14159
tauHMet_deltaPhi  = 15, 0., 3.14159
bHMet_deltaPhi    = 15, 0., 3.14159
ditau_deltaPhi    = 15, 0., 3.14159
dib_deltaPhi      = 15, 0., 3.14159
# dau1_pt           = 200, 23, 403
dau1_pt           = 40, 0, 200
dau1_eta          = 25, -2.5, 2.5
dau1_phi          = 25, -3.14159, 3.14159
dau1_iso          = 25, 0, 1
dau1_MVAisoNew    = 6, 0,6
dau2_MVAisoNew    = 6, 0,6
# dau2_pt           = 20, 0, 400
dau2_pt           = 40, 0, 200
dau2_eta          = 25, -2.5, 2.5
dau2_phi          = 25, -3.14159, 3.14159
dau2_iso          = 25, 0, 1
bjet1_pt          = 30, 0, 300
bjet2_pt          = 30, 0, 300
bjet1_eta         = 25, -2.4, 2.4
bjet2_eta         = 25, -2.4, 2.4
bjet1_phi         = 25, -3.14159, 3.14159
bjet2_phi         = 25, -3.14159, 3.14159
met_et            = 30, 0, 600
met_phi           = 25, -3.14159, 3.14159
met_er_et         = 30, 0, 600
met_er_phi        = 25, -3.14159, 3.14159
# bH_mass           = 25, 10, 510
#bH_mass           = 50, 0, 300
bH_mass           = 25, 0, 500
tauH_mass         = 25, 0, 250
bH_mass_raw       = 50, 0, 300
#tauH_SVFIT_mass   = 25, 20, 500
tauH_SVFIT_mass   = 25, 0, 250
HHmass            = 25, 0, 1000
njets            = 20,-0.5,19.5
njets20           = 10,-0.5,9.5
njets50           = 10,-0.5,9.5

nbjetscand            = 20,-0.5,19.5
nbjets20           = 20,-0.5,19.5
npv               = 25, 0, 50
npu               = 25, 0, 50

rho               = 25, 0, 50
tauHMetdeltaPhi   = 25, 0, 3.15
bHMetdeltaPhi     = 25, 0, 3.15
ditau_deltaR       = 25, 0, 5
dib_deltaR         = 25, 0, 5
dau1MET_deltaphi       = 25, 0, 3.14159
tauHsvfitMet_deltaPhi = 25, 0, 3.14159
mT1                   = 20, 0, 200.
mT2                   = 20, 0, 200.
HHsvfit_deltaPhi      = 25, 0, 3.14159
dib_deltaR_per_bHpt          = 60, 0, 600
ditau_deltaR_per_tauHsvfitpt = 60, 0, 600
BDTResonant           = 25,-1,1
# BDTResonantLM         = 25,-1,1
# BDTResonantHM         = 25,-1,1
BDTResonantLM         = 2500,-1,1
BDTResonantHM         = 2500,-1,1
BDTNonResonant        = 25,-1,1

LepTauKine            = 25,-0.94,0.94
genDecMode1           = 10, -2, 8
dau1_dxy           = 100, -0.01, 0.01
dau1_dz            = 100, -0.1, 0.1
fatjet_softdropMass = 50, 0, 300

HH_deltaR            = 35, 0, 7
tauH_pt              = 20, 0, 300
VBFjj_dEtaSign       = 40, -20, 20
dib_dEtaSign         = 40, -20, 20
VBFjj_deltaEta       = 20, 0, 10
ditau_deltaEta       = 20, 0, 10
VBFjj_mass           = 20, 0, 1500
VBFjet2_pt           = 20, 0, 500
bH_VBF1_deltaEta     = 10, 0, 10
VBFjet1_btag_deepCSV = 20, -1, 1
VBFjet1_pt           = 20, 0, 500
VBFjet2_PUjetID      = 20, -1, 1

jet3_pt              = 20, 0, 300
jet4_pt              = 20, 0, 300
jet3_eta             = 25, -5, 5
jet4_eta             = 25, -5, 5

BDT_MET_bH_cosTheta = 20,  -1,   1
BDT_HT20            = 20,   0, 400
bH_pt               = 20,   0, 400
p_zeta              = 30, -50, 250
HH_zV               = 40, -10, 10

BDToutVBF           = 20, -1, 1

BDToutSM_kl_1            = 10,-1,1
BDToutSM_kl_5            = 10,-1,1
BDToutSM_kl_2.45         = 10,-1,1
BDToutSM_kl_0            = 10,-1,1
BDToutSM_kl_30           = 10,-1,1

BDToutLM_spin_0_mass_280 = 10,-1,1
BDToutMM_spin_0_mass_400 = 10,-1,1
BDToutHM_spin_0_mass_650 = 10,-1,1

isTau2real = 2, 0, 2
isTau1real = 2, 0, 2
nRealTaus = 3, 0, 3

dau1_decayMode = 11, 0, 11
dau2_decayMode = 11, 0, 11

#########################################################################
#########################################################################

# user defined binning for a variable - has precedence on [histos]
[binning]
# HH_mass             = 200, 250, 300, 350, 450, 600, 1000
# HH_mass_raw         = 200, 250, 300, 350, 450, 600, 1000
# HH_mass_raw_tauup   = 200, 250, 300, 350, 450, 600, 1000
# HH_mass_raw_taudown = 200, 250, 300, 350, 450, 600, 1000
# HH_mass_raw         = 200, 225, 250, 275, 300, 350, 450, 550, 700, 1000 #200, 225, 250, 275, 300, 350, 400, 450, 500, 600, 1000
# HH_mass_raw_tauup   = 200, 225, 250, 275, 300, 350, 450, 550, 700, 1000
# HH_mass_raw_taudown = 200, 225, 250, 275, 300, 350, 450, 550, 700, 1000
# HHKin_mass          = 250, 275, 300, 350, 400, 450, 500, 600, 700, 850, 1000, 1600
# HHKin_mass_raw      = 250, 275, 300, 350, 400, 450, 500, 600, 700, 850, 1000, 1600

HH_mass_raw          = 0, 100, 200, 225, 250, 275, 300, 350, 400, 450, 500, 600, 700, 850, 1000

HHKin_mass_raw          = 250, 275, 300, 350, 400, 450, 500, 600, 700, 850, 1000
HHKin_mass_raw_tauup    = 250, 275, 300, 350, 400, 450, 500, 600, 700, 850, 1000
HHKin_mass_raw_taudown  = 250, 275, 300, 350, 400, 450, 500, 600, 700, 850, 1000
HHKin_mass_raw_jetup    = 250, 275, 300, 350, 400, 450, 500, 600, 700, 850, 1000
HHKin_mass_raw_jetdown  = 250, 275, 300, 350, 400, 450, 500, 600, 700, 850, 1000

tauH_pt = 0,20, 40, 60, 80, 100,125, 150, 175, 200, 250, 300
tauH_SVFIT_pt = 0,20, 40, 60, 80, 100,125, 150, 175, 200, 250, 300
#tauH_mass =10,30, 50, 75, 90,105,120,135, 150, 170, 200, 250, 300, 350, 400, 450, 500
bH_pt = 0, 20, 40, 60, 80, 100, 125, 150, 175, 200, 250, 300
#dau1_pt = 0, 20, 40, 60, 80, 100, 125,  150, 175, 200, 250, 300
#dau2_pt = 0, 20, 40, 60, 80, 100, 125,  150, 175, 200, 250, 300


bH_mass             = 10, 35, 60, 85, 110, 135, 160, 185, 210, 250, 300, 350, 400, 500
met_et             = 0, 20, 40, 60, 80, 120, 150, 200, 250, 400,600
met_er_et             = 0, 20, 40, 60, 80, 120, 150, 200, 250,400, 600
# bH_mass             = 10, 35, 60, 85, 110, 135, 160, 185, 210, 250, 300, 350, 400, 500
# bH_mass_raw         = 10, 35, 60, 85, 110, 135, 160, 185, 210, 250, 300, 350, 400, 500
fatjet_softdropMass = 10, 35, 60, 85, 110, 135, 160, 185, 210, 250, 300, 350, 400, 500
# tauH_SVFIT_mass     = 10, 35, 60, 85, 110, 135, 160, 185, 210, 250, 300, 350, 400, 500
# MT2                 = 0, 25, 50, 75, 100, 125, 150, 175, 200, 250, 300, 350, 500, 600
MT2          = 0, 25, 50, 75, 100, 125, 150, 200, 250, 300, 500
MT2_tauup    = 0, 25, 50, 75, 100, 125, 150, 200, 250, 300, 500
MT2_taudown  = 0, 25, 50, 75, 100, 125, 150, 200, 250, 300, 500
MT2_jetup    = 0, 25, 50, 75, 100, 125, 150, 200, 250, 300, 500
MT2_jetdown  = 0, 25, 50, 75, 100, 125, 150, 200, 250, 300, 500



#########################################################################
#########################################################################

[histos2D]
tauH_SVFIT_mass:bH_mass_raw = 100, 0, 500, 100, 0, 500
genDecMode1:genDecMode2     = 10, -2, 8, 10, -2, 8
VBFjj_deltaEta:VBFjj_mass   = 40,  0,  10, 80,  0, 4000

# user defined binning for a variable - will override the definition in [histos2D]
# NOTE: if both x and y binnings are defined, there is no need to insert a binning in [histos2D]
# note: to specify an user binning for a certain axis of a 2D plot, e.g. a binning for B in A:B, use '@' :
# A:B@B = 0, 15, 20, 30, 50, 1000
[binning2D]
# tauH_SVFIT_mass:bH_mass_raw@bH_mass_raw     = 10, 35, 60, 85, 110, 135, 160, 185, 210, 250, 300, 350, 400, 500
# tauH_SVFIT_mass:bH_mass_raw@tauH_SVfit_mass = 10, 35, 60, 85, 110, 135, 160, 185, 210, 250, 300, 350, 400, 500